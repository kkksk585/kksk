在软件开发过程中，我们经常需要在不打断思路的情况下，快速完成代码的修改和重构。频繁地在不同窗口间切换，会严重影响我们的编程效率和专注度。为了解决这个问题，Trae 提供了强大的内联聊天（Inline Chat）功能，让 AI 助手能够无缝地融入您的编码流程。

本文将详细介绍如何使用 Trae 的内联聊天功能，让它成为您日常开发中的得力助手。

1\. 核心功能：随时随地修改代码
-----------------

Trae 的内联聊天专注于一件事：在编辑器内，用最自然的方式修改代码。无论你是想重构一整个函数，还是只想优化几行代码，它都能帮你轻松完成。

### 快速上手

启动内联聊天非常简单，主要有两种方式：

*   **修改代码块**：将光标放在你想要修改的代码块内（无需选中），按下快捷键 `Cmd + I` (macOS) 或 `Ctrl + I` (Windows)，会在代码上方出现输入框。
    
    ![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8f8333c9f1b04a57805de72a7653fe25~tplv-k3u1fbpfcp-jj-mark:1600:0:0:0:q75.jpg#?w=960&h=259&s=46787&e=png&b=1a1c1f)
    
*   **修改选中代码**：选中你想要修改的特定代码，代码上方会浮现一个菜单，点击 **编辑** 按钮，同样可以唤起输入框。
    

![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8fdd6671ae114fc7805f4ec5493d24ca~tplv-k3u1fbpfcp-jj-mark:1600:0:0:0:q75.jpg#?w=904&h=312&s=51413&e=png&b=181a1d)

唤起输入框后，用自然语言描述你的修改意图。例如，我们想将一个查询活跃用户的函数，改为查询非活跃用户，只需输入："修改为查询非活跃用户"，然后按回车或点击发送按钮。如果你想中途取消，按 `ESC` 键即可关闭输入框。

![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c9f4891689fa4285b0bb90e9da3025fb~tplv-k3u1fbpfcp-jj-mark:1600:0:0:0:q75.jpg#?w=954&h=400&s=62851&e=png&b=1d1f23)

AI 会立刻分析你的代码和意图，并以 Diff（差异对比）视图的形式，清晰地展示代码的建议变更。

![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8f4b8bfb143c4adf8c616c12eacbe7c0~tplv-k3u1fbpfcp-jj-mark:1600:0:0:0:q75.jpg#?w=1272&h=609&s=130066&e=png&b=23252a)

### 处理修改结果

AI 会以 Diff 视图的形式，清晰地展示代码的变更。你可以直观地预览修改前后的差异，并决定如何处理：

*   **全部接受/拒绝**：点击对话框左下角的 **接受** (`Cmd/Ctrl + Enter`) 或 **拒绝** (`Cmd/Ctrl + Backspace`) 按钮，可以快速应用或放弃所有修改。
*   **部分接受/拒绝**：对于更精细的控制，你可以点击每个代码片段右上角的 `^Y` (接受) 或 `^N` (拒绝) 按钮，逐一处理每个变更。
*   **重试**：如果 AI 的第一次尝试不符合你的预期，点击 **重试** 按钮，它会根据相同的指令重新生成一次。

这种"先预览，后采纳"的模式，让你始终对代码有完全的掌控力。

2\. 弥补终端短板：自定义终端助手
------------------

熟悉 Cursor 的用户可能记得，它的内联聊天（`Cmd+K`）同时支持编辑器和终端。然而，Trae 目前的内联聊天 (`Cmd+I`) 功能主要集中在文件编辑上，尚未覆盖终端场景。

如果，我们直接在 Trae 的聊天中询问终端命令，可能会得到纯文本的建议，这不是我们想要的结果。

![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3c091ca7070845cbbeec3693aa721a06~tplv-k3u1fbpfcp-jj-mark:1600:0:0:0:q75.jpg#?w=735&h=744&s=104996&e=png&b=1a1c20)

这是否意味着我们在终端中就无法享受 AI 的便利了呢？当然不是。我们可以利用 Trae 强大的自定义智能体功能，为自己打造一个专属的"终端命令助手"。我们在 [Agent：Trae 的核心能力](./3-agent.md "./3-agent.md") 一文中详细介绍过如何创建智能体。

如果我们不使用专门的终端智能体，直接在聊天中询问终端命令，可能会得到纯文本的建议，我们还需要手动复制粘贴，就像这样：

![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/340cdec82a0e4fc9b1881a80e8aca719~tplv-k3u1fbpfcp-jj-mark:1600:0:0:0:q75.jpg#?w=735&h=744&s=104996&e=png&b=1a1c20)

这显然不够高效。现在，让我们来创建一个终端助手。

### 创建步骤

1.  进入智能体设置，点击 **\+ 创建智能体**。
2.  填写配置：
    
    *   **名称**：`终端助手`
    *   **提示词**：
    
    ```markdown
    你是一个专业的终端命令助手，专门将用户的自然语言需求转换为对应的终端命令并执行。你的核心职责是：
    
    1. **命令转换**：将用户的任何输入都理解为终端操作需求，并转换为相应的命令
    2. **命令解释**：详细说明每个命令的功能、参数含义和预期结果
    3. **命令执行**：根据需要安全地执行终端命令
    4. **结果分析**：解释命令执行结果，帮助用户理解输出内容
    5. **安全提醒**：对于潜在危险的操作提前警告
    
    **重要原则**：
    - 用户的所有输入都应被理解为终端操作需求
    - 优先提供适合用户操作系统（macOS/Linux/Windows）的命令
    - 在执行前先展示命令，让用户确认
    - 提供命令的详细解释和使用场景
    - 对于复杂操作，提供分步骤的命令序列
    
    **响应格式**：
    1. 理解用户需求
    2. 提供对应的终端命令
    3. 解释命令参数和功能
    4. 执行命令（如需要）
    5. 解释执行结果
    
    示例：
    用户："查看当前目录文件"
    回应："我理解您想查看当前目录的文件列表，对应的命令是：`ls -la`"
    ```
    
    *   **工具**：务必勾选 **终端** 工具。

![image.png](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d65f7299f7324558b71bb34f81c1eb1a~tplv-k3u1fbpfcp-jj-mark:1600:0:0:0:q75.jpg#?w=743&h=1066&s=122965&e=png&b=181a1d)

### 使用效果

创建完成后，在 AI 对话框中通过 `@` 唤起我们新建的 `终端助手`，然后输入你的需求，比如"查看当前目录下最大的5个文件"。

现在，智能体不仅会生成正确的命令，还会直接在终端中执行它，并返回结果。

![image.png](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b91f3d7135ac4f0abe4c600999588baf~tplv-k3u1fbpfcp-jj-mark:1600:0:0:0:q75.jpg#?w=1948&h=1137&s=221555&e=png&b=1b1d21)

通过这个简单的自定义，我们成功地将 AI 的能力扩展到了终端，弥补了内联聊天在这一场景的缺失，让工作流更加顺畅。

3\. 总结
------

Trae 的内联聊天（`Cmd + I`）是一个专注于提升编码效率的利器。它让你无需离开当前文件，就能快速完成代码的修改、重构和优化。

尽管它目前不支持终端操作，但 Trae 灵活的 Agent 机制为我们提供了完美的解决方案。通过创建一个简单的自定义智能体，我们就能拥有一个强大的终端助手，实现自然语言到终端命令的无缝转换和执行。

熟练掌握内联聊天和自定义智能体，您将能进一步减少开发中的"上下文切换"，让 AI 真正成为融入您日常工作流的贴身助手。